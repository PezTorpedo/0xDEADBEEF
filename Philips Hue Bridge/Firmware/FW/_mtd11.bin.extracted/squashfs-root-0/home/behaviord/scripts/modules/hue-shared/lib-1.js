"use strict";var ErrorMap=[{errorMessageRegex:["command queue is full","internal error","invalid request","connection error"],outputMessage:"internal error"},{errorMessageRegex:["device is off or cannot be reached",'device (.*?) is "soft off", command (.*?) may not have effect',"device (.*?) has communication issues, ","command (.*?) may not have effect"],outputMessage:""},{errorMessageRegex:["resource does not exist","mapping request to resource failed","exception while mapping request data","Failed fetching (.*?)","Recipe not found(.*?)","Expected accessory (.*?)","too few or too many required services found"],outputMessage:"resource error"},{errorMessageRegex:["Configured (.*?) duration is too low; minimum (.*?) duration for (.*?) style is (.*?) seconds."],outputMessage:"validation error"},{errorMessageRegex:["attribute (.*?) is not supported by resource","attribute (.*?) cannot be written","invalid attribute value (.*?)","invalid attribute value (.*?) in current state","Configuration with invalid day schedule provided","Invalid (.*?)"],outputMessage:"resource attribute error"},{errorMessageRegex:["Insufficient resources"],outputMessage:"capacity full error"},{errorMessageRegex:["geolocation not configured"],outputMessage:"geolocation configuration error"},{errorMessageRegex:["cannot read property (.*?) of undefined","failed to initialize behaviors or service data"],outputMessage:"script error"},{errorMessageRegex:["Config without valid actions provided","Missing configuration for action","Expected accessory with one of model ids (.*?)","Where has (.*?)","Not all rotaries have a matching service","Mismatch between speaker targets and actions","Not all buttons have a matching service","No actions could be created"],outputMessage:"invalid actions configuration"}];exports.GetErrorMessage=function(errors,log){return void 0===errors?"":Array.isArray(errors)?function(errors){return void 0!==errors&&errors.length>0}(errors)?function(errorLocal){var message="";if(errorLocal.length>0){if(message=errorLocal[0],errorLocal.length>1){for(var i=1;i<errorLocal.length-1;i++)message=message+", "+errorLocal[i];message=message+" and "+errorLocal[errorLocal.length-1]}message=message.charAt(0).toUpperCase()+message.slice(1)+"."}return message}(function(errorsLocal){var includes=function(arrayOfStrings,string){for(var i=0;i<arrayOfStrings.length;i++)if(arrayOfStrings[i]===string)return!0;return!1},errorMessages=[];return errorsLocal.forEach((function(errorItem){for(var found=!1,i=0;i<ErrorMap.length;i++)for(var errorMap=ErrorMap[i],j=0;j<errorMap.errorMessageRegex.length;j++)if(errorItem.match(errorMap.errorMessageRegex[j])){""!==errorMap.outputMessage&&(includes(errorMessages,errorMap.outputMessage)||(found=!0,errorMessages.push(errorMap.outputMessage)));break}!found&&log&&log.warn("Unknown error reported: "+errorItem)})),errorMessages}(errors.map((function(errorItem){return"string"==typeof errorItem?errorItem:errorItem.description})))):"":"Unknown error"};
