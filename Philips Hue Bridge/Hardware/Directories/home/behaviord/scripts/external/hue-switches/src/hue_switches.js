"use strict";var script_environment=require("hue-shared/lib-2.js"),rotary_behavior=require("hue-shared/lib-10.js"),what_config=require("hue-shared/lib-11.js"),accessory=require("hue-shared/lib-6.js"),motion_behavior=require("hue-shared/lib-12.js");require("hue-shared/lib-4.js"),require("hue-shared/lib-8.js"),require("hue-shared/lib-7.js"),require("hue-shared/lib-9.js"),require("hue-shared/lib-3.js"),require("hue-shared/lib-5.js"),require("hue-shared/lib-1.js");var GenericSwitch=function(){function GenericSwitch(context,env,resultCallback){this.context=context,this.env=env,this.init(resultCallback)}return GenericSwitch.prototype.init=function(resultCallback){var _a,_b,config=this.context.config,source=null!==(_a=config.source)&&void 0!==_a?_a:config.device,accessory$1=new accessory.Accessory(source,this.env,this.context,what_config.defaultConfiguration);if(config.motion&&accessory$1.install(motion_behavior.MotionBehavior,source),config.buttons){var behavior=accessory$1.install(rotary_behavior.SwitchBehavior,{buttons:accessory.objectMap(config.buttons,(function(_button,id){return"buttons.".concat(id)})),where:config.where});0===(null===(_b=null==config?void 0:config.model_id)||void 0===_b?void 0:_b.indexOf("RWL"))&&behavior.enableLatencyMetadataTransferWithTag("DimmerSwitch_button_scene_recall")}config.rotaries&&accessory$1.install(rotary_behavior.RotaryBehavior,{rotaries:accessory.objectMap(config.rotaries,(function(_rotary,id){return"rotaries.".concat(id)})),where:config.where}),accessory$1.init(resultCallback,resultCallback)},GenericSwitch.migrateConfig=function(config){for(var _i=0,_a=Object.keys(config);_i<_a.length;_i++){var key=_a[_i];null!==config[key]&&void 0!==config[key]&&0!==Object.keys(config[key]).length||delete config[key]}return config},GenericSwitch.Environment=script_environment.ScriptEnvironmentWithClipUtils,GenericSwitch}();module.exports=GenericSwitch;
