{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "what.json#",
  "type": "array",
  "items": {
    "type": "object",
    "properties": {
      "group": {
        "$ref": "hue-clip/group_identifier.json#"
      },
      "items": {
        "type": "array",
        "minItems": 1,
        "items": {
          "$ref": "hue-clip/light_identifier.json#"
        }
      },
      "recall": {
        "oneOf": [
          {
            "$ref": "hue-clip/scene_identifier.json#"
          },
          {
            "$ref": "hue-clip/smart_scene_identifier.json#"
          },
          {
            "$ref": "hue-clip/recipe_identifier.json#"
          }
        ]
      },
      "actions": {
        "type": "array",
        "items": {
          "$ref": "hue-clip/action.json#"
        },
        "minItems": 1
      },
      "blink": {
        "type": "object",
        "properties": {
        }
      }
    },
    "required": ["group"],
    "oneOf": [
      {
        "required": ["actions"],
        "not": {
          "anyOf": [
            { "required": ["items"] },
            { "required": ["recall"] },
            { "required": ["blink"] }
          ]
        },
        "maxProperties": 2
      },
      {
        "properties": {
          "recall": {
            "oneOf": [
              {
                "$ref": "hue-clip/scene_identifier.json#"
              },
              {
                "$ref": "hue-clip/recipe_identifier.json#"
              }
            ]
          }
        },
        "required": ["recall"],
        "not": {
          "anyOf": [
            { "required": ["actions"] },
            { "required": ["blink"] }
          ]
        },
        "maxProperties": 3
      },
      {
        "properties": {
          "recall": {
            "oneOf": [
              {
                "$ref": "hue-clip/smart_scene_identifier.json#"
              }
            ]
          }
        },
        "required": ["recall"],
        "not": {
          "anyOf": [
            { "required": ["actions"] },
            { "required": ["blink"] },
            { "required": ["items"] }
          ]
        },
        "maxProperties": 2
      },
      {
        "required": ["blink"],
        "not": {
          "anyOf": [
            { "required": ["actions"] },
            { "required": ["recall"] }
          ]
        },
        "maxProperties": 3
      }
    ],
    "additionalProperties": false
  },
  "minItems": 1
}